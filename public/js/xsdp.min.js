$(function () { xsdp.init() }); var xsdpconfig = { rootPath: "/" }, xsdp = { variables: { lotMsgListMN: 0, lotMsgListMT: 0, currentPage: 1 }, init: function () { this.events() }, events: function () { $('input[type="radio"][name="optionsTK"]').on("change", function () { window.location.href = $(this).val() }), $("#btndoSo").on("click", function () { var e = $("#ngaydoheader").val(), t = $("#tinhheader").val(), n = $("#inputNumberDo").val(), o = (Date.parse(e), /^-?[0-9,]+$/), a = $("#tinhheader option:selected").val(); return 0 == e.length ? (xsdp.dialog(null, null, "Bạn chưa nhập ngày dò", null, null, function () { $("#ngaydoheader").focus() }), !1) : 0 == t.length ? (xsdp.dialog(null, null, "Bạn chưa chọn tỉnh", null, null, function () { $("#tinhheader").focus() }), !1) : 0 == n.length ? (xsdp.dialog(null, null, "Bạn chưa nhập số cần dò", null, null, function () { $("#inputNumberDo").focus() }), !1) : n.length < 2 || n.length > 17 ? (xsdp.dialog(null, null, "Bạn có thể nhập tối thiểu 2 chữ số, tối đa 17 chữ số", null, null, function () { $("#inputNumberDo").focus() }), !1) : o.test(n) ? void (window.location.href = xsdpconfig.rootPath + "do-so-trung-" + n + "-" + a + "-" + e.replace(/-/g, "_") + ".html") : (xsdp.dialog(null, null, 'Bạn chỉ có thể nhập số hoặc dấu ", "', null, null, function () { $("#inputNumberDo").focus() }), !1) }), $("#amplitude").keypress(function (e) { return 8 != e.which && 0 != e.which && (e.which < 48 || e.which > 57) ? ($("#errmsg").html("Vui lòng nhập biên độ là số.").show().fadeOut("slow"), !1) : void 0 }) }, ajaxEvents: { OnComplete: function () { $(".ajaxLoading").html(""), $(".btn.btn-red").prop("disabled", !1).css("cursor", "default") }, OnSuccess: function (e, t, n) { "success" == t ? 1 == e.jsonFlag ? e.jsonRetval.length > 0 && xsdp.dialog(null, "Thông báo", e.jsonRetval, null, null, function () { window.location.href = xsdpconfig.rootPath + "profile.html" }) : e.jsonRetval.length > 0 && xsdp.dialog(null, "Thông báo", e.jsonRetval, null, null, null) : alert("Quý khách vui lòng thử lại sau.") }, OnFailure: function (e) { $(".ajaxLoading").html(""), $(".btn.btn-red").prop("disabled", !1).css("cursor", "default") }, LoginOnBegin: function () { $(".ajaxLoadingLogin").html('<image src="../assets/images/Loading_icon.gif" alt="Loading..." />'), $(".btn-login").prop("disabled", !0).css("cursor", "wait") }, LoginOnSuccess: function (e, t, n) { "success" == t ? 1 == e.jsonFlag ? e.jsonRetval.length > 0 && xsdp.dialog(null, "Thông báo", "Đăng nhập tài khoản thành công", null, null, function () { window.location.href = e.jsonRetval }) : e.jsonRetval.length > 0 && xsdp.dialog(null, "Thông báo", e.jsonRetval, null, null, null) : alert("Quý khách vui lòng thử lại sau."), $(".ajaxLoadingLogin").html("") }, RegisterOnBegin: function () { $(".ajaxLoadingRegister").html('<image src="../assets/images/Loading_icon.gif" alt="Loading..." />'), $(".btn-register").prop("disabled", !0).css("cursor", "wait") }, RegisterOnSuccess: function (e, t, n) { "success" == t ? 1 == e.jsonFlag ? e.jsonRetval.length > 0 && xsdp.dialog(null, "Thông báo", "Đăng ký tài khoản thành công", null, null, function () { window.location.href = xsdpconfig.rootPath + "dang-nhap.html" }) : e.jsonRetval.length > 0 && xsdp.dialog(null, "Thông báo", e.jsonRetval, null, null, null) : alert("Quý khách vui lòng thử lại sau."), $(".ajaxLoadingRegister").html("") }, RetrivePasswordOnBegin: function () { $(".ajaxLoadingRetrivePassword").html('<image src="../assets/images/Loading_icon.gif" alt="Loading..." />'), $(".btn-retrive-password").prop("disabled", !0).css("cursor", "wait") }, RetrivePasswordOnSuccess: function (e, t, n) { "success" == t ? e.jsonRetval.length > 0 && xsdp.dialog(null, "Thông báo", e.jsonRetval, null, 300, null) : alert("Quý khách vui lòng thử lại sau."), $(".ajaxLoadingRetrivePassword").html("") }, NewsletterEmailOnBegin: function () { $(".ajaxLoadingNewsletterEmail").html('<image src="../assets/images/Loading_icon.gif" alt="Loading..." />'), $(".btn-newsletter-email").prop("disabled", !0).css("cursor", "wait") }, NewsletterEmailOnComplete: function () { $(".ajaxLoadingNewsletterEmail").html(""), $(".btn-newsletter-email").prop("disabled", !1).css("cursor", "default") }, NewsletterEmailOnSuccess: function (e, t, n) { "success" == t ? e.jsonRetval.length > 0 && xsdp.dialog(null, "Thông báo", e.jsonRetval, null, 300, null) : alert("Quý khách vui lòng thử lại sau."), $(".ajaxLoadingNewsletterEmail").html("") }, NewsletterEmailOnFailure: function () { $(".ajaxLoadingNewsletterEmail").html(""), $(".btn-newsletter-email").prop("disabled", !1).css("cursor", "default") } }, getTinhtheoNgay: function (e) { var t = xsdpconfig.rootPath + "tinh-theo-ngay-ajax.html", n = { strDay: e, lotteriesId: 0 }; $.xsdpAjax(t, "Get", n, function (e) { $("#tinhheader").html(e) }) }, getCaptcha: function (e) { var t = "", n = this.generateUUID(); switch (e) { case 1: t = xsdpconfig.rootPath + "xsdp-captcha.html?id=" + n; break; case 2: t = xsdpconfig.rootPath + "register-captcha.html?id=" + n; break; default: t = xsdpconfig.rootPath + "retrivepassword-captcha.html?id=" + n } return $("#CaptchaImg" + e).attr("src", t), !1 }, generateUUID: function () { var e = (new Date).getTime(); window.performance && "function" == typeof window.performance.now && (e += performance.now()); var t = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (t) { var n = (e + 16 * Math.random()) % 16 | 0; return e = Math.floor(e / 16), ("x" == t ? n : 3 & n | 8).toString(16) }); return t }, loteryloadmore: function (e) { var t = { pageIndex: xsdp.variables.currentPage }, n = $(".loadmoreResult"); $.xsdpAjax(e, "Get", t, function (e) { e.length > 0 ? (xsdp.variables.currentPage++ , n.append(e)) : $(".btn-viewmore").hide() }) }, Xsmb: { variables: { page: 1 }, loteryloadmore: function () { var e = xsdpconfig.rootPath + "loadmore-lottery-mb.html", t = { pageIndex: xsdp.Xsmb.variables.page }, n = $(".lotteryMbResult"); $.xsdpAjax(e, "Get", t, function (e) { e.length > 0 ? (xsdp.Xsmb.variables.page++ , n.append(e)) : $(".btn-viewmore").hide() }) }, loterytheothuloadmore: function (e) { var t = xsdpconfig.rootPath + "loadmore-lottery-mb-theo-thu.html", n = { pageIndex: xsdp.Xsmb.variables.page, dayofWeek: e }, o = $(".lotteryMbTheoThuResult"); $.xsdpAjax(t, "Get", n, function (e) { e.length > 0 ? (xsdp.Xsmb.variables.page++ , o.append(e)) : $(".btn-viewmore").hide() }) } }, Xsmt: { variables: { page: 1 }, loterytheothuloadmore: function (e) { var t = xsdpconfig.rootPath + "loadmore-lottery-mb-theo-thu.html", n = { pageIndex: xsdp.Xsmb.variables.page, dayofWeek: e }, o = $(".lotteryMbTheoThuResult"); $.xsdpAjax(t, "Get", n, function (e) { e.length > 0 ? (xsdp.Xsmb.variables.page++ , o.append(e)) : $(".btn-viewmore").hide() }) } }, Xsmn: { variables: { page: 1 }, loteryloadmore: function (e) { var t = { pageIndex: xsdp.Xsmn.variables.page }, n = $(".lotteryMnResult"); $.xsdpAjax(e, "Get", t, function (e) { e.length > 0 ? (xsdp.Xsmn.variables.page++ , n.append(e)) : $(".btn-viewmore").hide() }) } }, Xsmnbydayofweek: { variables: { page: 1 }, loterytheothuloadmore: function (e, t) { var n = { pageIndex: xsdp.Xsmnbydayofweek.variables.page, dayofWeek: t }, o = $(".lotteryMNByDayOfWeekResult"); $.xsdpAjax(e, "Get", n, function (e) { e.length > 0 ? (xsdp.Xsmnbydayofweek.variables.page++ , o.append(e)) : $(".btn-viewmore").hide() }) } }, KQDai: { variables: { page: 1 }, loteryloadmore: function (e, t) { var n = { lotteryId: t, pageIndex: xsdp.KQDai.variables.page }, o = $(".lotteryResult"); $.xsdpAjax(e, "Get", n, function (e) { e.length > 0 ? (xsdp.KQDai.variables.page++ , o.append(e)) : $(".btn-viewmore").hide() }) } }, dientoan636: { variables: { page: 1 }, loteryloadmore: function (e) { var t = { pageIndex: xsdp.dientoan636.variables.page }, n = $(".DienToan636Result"); $.xsdpAjax(e, "Get", t, function (e) { e.length > 0 ? (xsdp.dientoan636.variables.page++ , n.append(e)) : $(".btn-viewmore").hide() }) } }, dientoan636theothu: { variables: { page: 1 }, loteryloadmore: function (e, t) { var n = { dayofweek: t, pageIndex: xsdp.dientoan636theothu.variables.page }, o = $(".DienToan636TheoThuResult"); $.xsdpAjax(e, "Get", n, function (e) { e.length > 0 ? (xsdp.dientoan636theothu.variables.page++ , o.append(e)) : $(".btn-viewmore").hide() }) } }, dientoan123: { variables: { page: 1 }, loteryloadmore: function (e) { var t = { pageIndex: xsdp.dientoan123.variables.page }, n = $(".DienToan123Result"); $.xsdpAjax(e, "Get", t, function (e) { e.length > 0 ? (xsdp.dientoan123.variables.page++ , n.append(e)) : $(".btn-viewmore").hide() }) } }, dientoan123theothu: { variables: { page: 1 }, loteryloadmore: function (e, t) { var n = { dayofweek: t, pageIndex: xsdp.dientoan123theothu.variables.page }, o = $(".DienToan123TheoThuResult"); $.xsdpAjax(e, "Get", n, function (e) { e.length > 0 ? (xsdp.dientoan123theothu.variables.page++ , o.append(e)) : $(".btn-viewmore").hide() }) } }, dientoanthantai: { variables: { page: 1 }, loteryloadmore: function (e) { var t = { pageIndex: xsdp.dientoanthantai.variables.page }, n = $(".DienToanThanTaiResult"); $.xsdpAjax(e, "Get", t, function (e) { e.length > 0 ? (xsdp.dientoanthantai.variables.page++ , n.append(e)) : $(".btn-viewmore").hide() }) } }, dientoanthantaitheothu: { variables: { page: 1 }, loteryloadmore: function (e, t) { var n = { dayofweek: t, pageIndex: xsdp.dientoanthantaitheothu.variables.page }, o = $(".DienToanThanTaiTheoThuResult"); $.xsdpAjax(e, "Get", n, function (e) { e.length > 0 ? (xsdp.dientoanthantaitheothu.variables.page++ , o.append(e)) : $(".btn-viewmore").hide() }) } }, dientoanmega645: { variables: { page: 1 }, loteryloadmore: function (e) { var t = { pageIndex: xsdp.dientoanmega645.variables.page }, n = $(".DienToanMega645Result"); $.xsdpAjax(e, "Get", t, function (e) { e.length > 0 ? (xsdp.dientoanmega645.variables.page++ , n.append(e)) : $(".btn-viewmore").hide() }) } }, ThongKe: { LoXien: { getReport: function () { var e = xsdpconfig.rootPath + "XSDPThongKeAjax/XSDPTKLoXien2", t = $("#ddLotteries option:selected").val(), n = $("#ddLotteries option:selected").text(), o = $("#ddlRollingNumbers").val(), a = $("input[name=loXienType]:checked").val(), i = { lotteryId: t, rollingNumber: o, lotteryName: n, type: a }, l = $(".thongkeloxien"); $.xsdpAjax(e, "Post", i, function (e) { e.length > 0 && l.html(e) }) } }, TkDau: { getReport: function () { var e = $("#ddLotteries").val(), t = e.split("@@"), n = t[0], o = t[1], a = "dau", i = $("#ddLotteries option:selected").text(), l = $("#ddlRollingNumbers option:selected").val(), s = xsdpconfig.rootPath + "XSDPThongKeAjax/XSDPThongKeDau2", r = { groupId: o, lotteryId: n, lotteryName: i, rollingNumber: l, type: a }, d = $(".thongkedau"); $.xsdpAjax(s, "Post", r, function (e) { e.length > 0 && d.html(e) }) } }, TkDuoi: { getReport: function () { var e = $("#ddLotteries").val(), t = e.split("@@"), n = t[0], o = t[1], a = "duoi", i = $("#ddLotteries option:selected").text(), l = $("#ddlRollingNumbers option:selected").val(), s = xsdpconfig.rootPath + "XSDPThongKeAjax/XSDPThongKeDau2", r = { groupId: o, lotteryId: n, lotteryName: i, rollingNumber: l, type: a }, d = $(".thongkedau"); $.xsdpAjax(s, "Post", r, function (e) { e.length > 0 && d.html(e) }) } }, TkLoganTheoTinh: { getReport: function () { var e = $("#ddLotteries option:selected").val(), t = $("#txtRollingNumbsers").val(); (0 == t || "" == t || null == t) && (t = 30, $("#txtRollingNumbsers").val("30")); var n = xsdpconfig.rootPath + "XSDPThongKeAjax/XSDPTKGanCucDai", o = { lotteryId: e, rollingNumbers: t }; $.xsdpAjax(n, "GET", o, function (e) { e.length > 0 && $("#ajaxContentTableAbove").html(e) }) } }, TkLoganTheoLoto: { getReport: function () { var e = $("#ddLotteries option:selected").val(), t = $("#txtRollingNumbsers").val(); (0 == t || "" == t || null == t) && (t = "00,01,02,03", $("#txtRollingNumbsers").val("00,01,02,03")); var n = xsdpconfig.rootPath + "XSDPThongKeAjax/XSDPTKGanCucDaiTheoLotos", o = { lotteryId: e, lotos: t }; $.xsdpAjax(n, "Post", o, function (e) { e.length > 0 && $("#ajaxContentTableAbove").html(e) }) } }, GroupChange: function () { $("#ddLotteries").html(""); var e = ($("#ddlGroups"), $("#ddLotteries")), t = $("#ddlGroups option:selected").val(); $("#ddLotteries option:selected").val(); 1 >= t ? e.append($("<option></option>").val(0).html("Miền Bắc")) : $.ajax({ url: xsdpconfig.rootPath + "Utils/GetAllLotteries", type: "Get", success: function (n) { var o = JSON.parse(n); $.each(o, function (n, o) { o.LotteryGroupId == t && e.append($("<option></option>").val(o.LotteryId).html(o.LotteryName)) }) } }) }, Tk0099: { getReport: function () { var e = xsdpconfig.rootPath + "XSDPThongKeAjax/XSDPThongKe0099v2", t = $("#ddLotteries option:selected").val(), n = $("#ddLotteries option:selected").text(), o = $("#ddlRollingNumbers").val(), a = { lotteryId: t, lotteryName: n, rollNumber: o, prizeType: 0 }, i = $(".thongke0099"); $.xsdpAjax(e, "Post", a, function (e) { e.length > 0 && (i.html(e), xsdp.setPercent()) }) } }, Mega645: { lanXuatHien: { getReport: function () { var e = $("#dateFromId").val(), t = $("#dateToId").val(), n = $("input[name='Mega645RadioGroup']:checked").val(), o = xsdpconfig.rootPath + "XSDPThongKeAjax/AjaxThongKeMegalanXuatHienV2", a = { dateFrom: e, dateTo: t, type: n }, i = $(".thongke645Lanxuathien"); $.xsdpAjax(o, "Get", a, function (e) { e.length > 0 && (i.html(e), xsdp.setPercent()) }) } }, theoThu: { getReport: function () { var e = $("#dayOfWeek option:selected").val(), t = $("#chuki option:selected").val(), n = xsdpconfig.rootPath + "XSDPThongKeAjax/AjaxThongKeMegaTheoThuV2", o = { dayOfWeek: e, chuki: t }, a = $(".thongke645theoThu"); $.xsdpAjax(n, "Get", o, function (e) { e.length > 0 && (a.html(e), xsdp.setPercent()) }) } } }, giaiDacBiet: { getReport: function () { var e = $("#ddLotteries option:selected").val(), t = $("#ddLotteries option:selected").text(), n = $("#amplitude").val(), o = xsdpconfig.rootPath + "thong-ke-giai-db-ajax.html", a = { lotteryId: e, lotteryName: t, pageIndex: 0, rowAmount: n }, i = $("#tkgiaiDB"); $.xsdpAjax(o, "Get", a, function (e) { e.length > 0 && i.html(e) }) } }, loKep: { getReport: function () { var e = xsdpconfig.rootPath + "XSDPThongKeAjax/XSDPThongKeLoKep", t = $("#ddLotteries option:selected").val(), n = $("#ddlDayOfWeeks option:selected").text(), o = $("#ddlRollingNumbers").val(), a = { lotteryId: t, dayOfWeek: n, solanquay: o }, i = $("#TKLokep"); $.xsdpAjax(e, "Post", a, function (e) { e.length > 0 && i.html(e) }) } }, DayOfWeekChange: function () { var e = $("#ddLotteries"), t = $("#ddlDayOfWeeks option:selected").val(), n = xsdpconfig.rootPath + "Utils/GetLotteriesByDayOfWeek", o = { dayOfWeek: t }; $.xsdpAjax(n, "Get", o, function (t) { var n = JSON.parse(t); e.html($("<option></option>").val(0).html("Miền Bắc")), $.each(n, function (t, n) { n.LotteryGroupId > 1 && e.append($("<option></option>").val(n.LotteryId).html(n.LotteryName)) }) }) }, TKDauDuoiDayOfWeekChange: function () { var e = $("#ddLotteries"), t = $("#ddlDayOfWeeks option:selected").val(); e.html($("<option></option>").val("0@@1").html("Miền Bắc")); var n = xsdpconfig.rootPath + "Utils/GetLotteriesByDayOfWeek", o = { dayOfWeek: t }; $.xsdpAjax(n, "Get", o, function (t) { var n = JSON.parse(t); $.each(n, function (t, n) { n.LotteryGroupId > 1 && e.append($("<option></option>").val(n.LotteryId + "@@" + n.LotteryGroupId).html(n.LotteryName)) }) }) }, MNMTDayOfWeekChange: function (e) { var t = $("#ddLotteries"), n = $("#ddlMNDayOfWeeks option:selected").val(), o = xsdpconfig.rootPath + "Utils/GetLotteriesByDayOfWeek", a = { dayOfWeek: n }; t.html(""), $.xsdpAjax(o, "Get", a, function (n) { var o = JSON.parse(n); $.each(o, function (n, o) { o.LotteryGroupId == e && t.append($("<option></option>").val(o.LotteryId).html(o.LotteryName)) }) }) }, MNMTDayOfWeekChangeLotteryCode: function (e) { var t = $("#ddLotteries"), n = $("#ddlMNDayOfWeeks option:selected").val(), o = xsdpconfig.rootPath + "Utils/GetLotteriesByDayOfWeek", a = { dayOfWeek: n }; t.html(""), $.xsdpAjax(o, "Get", a, function (n) { var o = JSON.parse(n); $.each(o, function (n, o) { o.LotteryGroupId == e && t.append($("<option></option>").val(o.LotteryCode.toLowerCase()).html(o.LotteryName)) }) }) }, thongKeCauTheoTinh: function () { var e = $("#ddLotteries option:selected").val(); window.location = "/tham-khao-xo-so/soi-cau-xo-so-" + e + ".html" } }, ThongKeCau: { CauLatLienTuc: function () { var e = xsdpconfig.rootPath + "XSDPThongKeAjax/AjaxCauLatLienTuc", t = { lifetime: lifetime, valuelt: valuelt, positionOne: positionOne, positionTwo: positionTwo }, n = $("#lotoCauLatLienTuc"); $.xsdpAjax(e, "Post", t, function (e) { e.length > 0 && n.html(e) }) } }, articles: { variables: { page: 1 }, loadmore: function (e, t) { var n = { catId: t, pageIndex: xsdp.articles.variables.page }, o = $(".loadmoreResult"); $.xsdpAjax(e, "Get", n, function (e) { e.length > 0 ? (xsdp.articles.variables.page++ , o.append(e)) : $(".btn-viewmore").hide() }) } }, setPercent: function () { for (var e = $(".progress").length, t = 1; e >= t; t++) { var n = parseInt($("#percent-" + t).data("percent")); $("#progress-percent-" + t).width(n + "%") } }, scrollToElement: function (e, t) { var n = { scrollTop: $(e).offset().top }; $("html,body").animate(n, "slow", "swing", function () { "function" == typeof t && t(), t = null }) }, clickScroll: function (e) { window.setTimeout(function () { xsdp.scrollToElement("#" + e) }, 1e3) }, dialog: function (e, t, n, o, a, i) { var l = null == e ? $('<div><p style="padding:15px;">' + (null == n ? "" : n) + "</p></div>") : $("#" + e); l.dialog({ title: null == t ? "Thông báo" : t, width: null == o ? 300 : o, height: null == a ? 200 : a, resizable: !1, autoOpen: !0, modal: !0, responsive: !0, buttons: { "Đóng": function () { $(this).dialog("close") } }, close: "function" == typeof i ? i : function () { } }) } }; $.extend({ xsdpAjax: function (e, t, n, o) { var a = $.isFunction(o) ? o : $.noop, i = $.isFunction(n) ? n : function () { return n }; $.ajax({ url: e, type: t, data: i(), traditional: !0, beforeSend: function () { $(".btn-viewmore").hide(), $(".loadmoreimg").show(), $("button.btn-red").prop("disabled", !0).css("cursor", "wait") }, error: function (e, t, n) { 400 == e.status ? alert(e.responseText) : alert("Không thể kết nối đến máy chủ."), $(".btn-viewmore").show(), $(".loadmoreimg").hide(), $("button.btn-red").prop("disabled", !1).css("cursor", "default") }, success: function (e, t, n) { window.setTimeout(function () { a(e) }, 10), $(".btn-viewmore").show(), $(".loadmoreimg").hide(), $("button.btn-red").prop("disabled", !1).css("cursor", "default") } }) } }), $.fn.preloader = function (e) { var t, n = { delay: 50, preload_parent: "a", check_timer: 300, ondone: function () { }, oneachload: function (e) { }, fadein: 300 }, e = $.extend(n, e), o = $(this), a = o.find("img").css({ visibility: "hidden", opacity: 0 }), i = 0, l = 0, s = [], r = e.delay, d = function () { t = setInterval(function () { if (i >= s.length) return clearInterval(t), void e.ondone(); for (l = 0; l < a.length; l++) 1 == a[l].complete && (0 == s[l] && (s[l] = !0, e.oneachload(a[l]), i++ , r += e.delay), $(a[l]).css("visibility", "visible").delay(r).animate({ opacity: 1 }, e.fadein, function () { $(this).parent().removeClass("preloader") })) }, e.check_timer) }; a.each(function () { 0 == $(this).parent(e.preload_parent).length ? $(this).wrap("<a class='preloader' />") : $(this).parent().addClass("preloader"), s[l++] = !1 }), a = $.makeArray(a); var p = jQuery("<img />", { id: "loadingicon", src: "/assets/images/Loading_icon.gif" }).hide().appendTo("body"); t = setInterval(function () { return 1 == p[0].complete ? (clearInterval(t), d(), void p.remove()) : void 0 }, 100) };